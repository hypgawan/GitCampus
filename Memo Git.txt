MEMO GIT


Setup : 
        Changer son nom d’utilisateur et email
        
        git config –global user.name “Kyllian Schafer”
        git config –global user.email “kyllianschafer@gmail.com”


        permet de laisser une trace lors de ses action.


Créer un Repository : 
        Le repository est le répertoire de projet sur github


        Git init


Tracker un fichier : 
        Git doit suivre un fichier pour pouvoir effectuer ses actions


        Git add [Fichier]


Vérification du Repository : 
        On va vérifier si les fichiers sont trackés ou untracked


        Git status


Modification de fichier : 
        Si on modifie un fichier il faut de nouveau le “Stage” pour la suite


        Git add [Fichier]


Etats de fichiers : 
        Untracked : n’a pas encore été inclus avec git add
        Tracked: a été inclus avec git add
        Unstaged : fichier modifié mais pas Staged
        Staged : fichier modifié prêt à être commit


        Le track se fait lors de l’ajout du fichier pour la première fois


        Le Stage s’effectue à chaque modification


Commande plus risquée mais plus rapide : git add –a
Cette commande effectue git add sur tous les fichiers


Commit : 
        Le commit permet de “versionner” son projet
        
        git commit -m “message”


        Le commit va sauvegarder l'état de vos fichiers Staged.


Voir les commits : 
        On va faire beaucoup de commits, on peut voir l’historique


        git log ou git log –oneline (pour être plus court)


        On peut voir les changements lors des commits


        git log –stat


Tag : 
        On peut “nommer” sa version avec un tag


        cette commande stock votre nom et ajoute un message au tag


        git tag -a v1.0 -m “descriptif de la version”




        Pour tag une version spécifique il faut aller chercher son hash
        Il est présent lors du commit


        git tag v1.0 [hash]


        On peut ensuite voir les détails d’une version avec 


        git show v1.0


        Supprimer un tag : 


        git tag -d v1.0


        Si vous avez besoin de changer le tag vers un autre commit


        git tag -f v1.0 [hash]








Stash
        Dans le cas où l’on doit travailler sur une ancienne version
        Si nous étions en modification pour la version suivante
        On peut “sauvegarder” ses modifications pour plus tard


        git stash push -m “message”


        Notre session est stockée en haut d’une pile Stash
        On peut la consulter avec 


        git stash list


        voir les changements apportés par le stash : 


        git stash show -p


        Restaurer le dernier stash : 


        git stash apply ou git stash apply stash@{n]


        “n” étant l’index du stash dans la pile


        Si on veut reprendre le stash et le sortir de la pile on utilise


        Git stash pop


        Si tu dois supprimer un stash


        Git stash drop stash@{n]


        Si tu veux supprimer tous les stash


        git stash clear


Historique : 
        On a déjà vu git log précédemment
        voici de nouvelles commandes utiles : 


        Voir un commit spécifique selon son hash


        git show [hash]
        




voir les modifications entre son avancement et un commit


        git diff ou git diff –staged (seulement pour les fichiers staged)
        
        différence entre 2 commits : 


        git diff [hash1] [hash2]


L’aide : 
        Git inclut des commandes d’aide
        La commande générale qui montre les commandes


        Git help –all
        Git help  -g (guides et concepts)


        Pour l’aide sur une commande spécifique


        Git help [Commande]


Branches:


        Les branches sont importantes pour développer en environnement
        isolé.
        
        Git branch [nom]


        Pour voir nos branches


        Git branch


        Pour se se déplacer entre différentes branches ou versions 


        Git checkout [version/hash/branche]


        On peut par la suite commit la branche !


        Ou la supprimer avec


        Git branch -d [nom]


        On peut aussi renommer une branche


        Git branch -m [ancien nom] [nouveau nom]


Merging : 
        Une fois les modifications apportées à la branche on va les ajouter au main
        On se repositionne sur le main puis on merge la branche


        Git merge [branche]


        Si on a besoin de supprimer la branche après merge


        Git merge -d [branche]


        Si on veut créer un commit du merge
        
git merge --no-ff [branche]

Si on veut plutôt avoir les changements combinés en un seul merge


git merge --squash [branche]


Pour annuler un merge en cours (en cas de conflit par exemple)


        git merge –abort [branch]




Conflit lors du merge
Il faut modifier les fichiers où le conflit est présent


Git restore


        Si avant un commit une modification ne plait pas on peut annuler le staging


        git restore [fichier]


le fichier sera de retour dans son état initial




GITHUB
        Sur github on peut créer un “remote repository” c’est un dossier en ligne
        On pourra interagir avec depuis notre machine.


SSH : 
        On va générer sa clef publique et privée pour lier notre repo local et github


        activer SSH : 
        eval $(ssh-agent -s)


        générer la paire de clés : 
        ssh-keygen -t rsa -b 4096 -c [email]


        On va ensuite ajouter la clé à l’agent ssh
        ssh-add [chemin vers clé privée]
        Lister les clés SSH : 
        ssh-add -l


        supprimer une clé d’un agent ssh
        ssh-add -d [chemin vers clé privée]


        copier sa clé SSH pour la mettre sur Github attention on utilise la clé publique
        clip < [chemin vers clé publique]


        On collera la clé publique sur notre profil github 
-> section SSH and GPG keys
-> new SSH key
On pourra donner un nom à la clé pour s’y retrouver


Dans notre repository sur github on passe en SSH (au lieu de HTTPS)


Dans gitbash : 
ssh -T git@github.com

        pour tester l’authentification


        puis on ajoute une origine à distance (remote origin)
        git remote add origin [lien SSH du repository]


        on pourras le modifier avec
        git remote set-url origin [lien SSH du repository]


Modification depuis github : 
        On peut modifier un fichier depuis github.
        Ensuite on peut le commit sur une branche ou le main


Remote Pull : 
        On va pouvoir récupérer les fichiers sur github (le cloud) pour
        les importer en local. C’est un pull.


On peut déjà récupérer ce que d’autres personnes ont pu faire dans le
repository


git fetch        


        Puis regarder l’état du projet avec git status.
        On saura sur combien de commit de retard nous sommes par exemple.




        Pour voir les modifications apportés au remote on peut faire : 
        
        git log origin/main


        git diff origin/main
        
        Avec toutes ces informations nous pouvons faire un merge qui permet de
        ramener en local les modifications apportées au remote.


        git merge origin/main


        Une façon vraiment plus simple et rapide de fetch et merge est le pull
        le pull fait les deux en même temps et est plus rapide.


        git pull origin




Remote push : 
        Après avoir pull on peut ensuite envoyer les modifications locales au remote.
        Le push permet d’exporter notre commit vers le remote repository


        git push origin


        Les tags ne sont pas push, il faut aussi les push, soit tous ou soit un
        spécifique


        git push –tags


        git push origin v1.0


Pull une branche : 
Pour pull une branche il faut d’abord effectuer un premier pull.
Ensuite on peut se mettre sur la branche avec un checkout


git checkout [nombranche]        


        retenter un pull à ce niveau pour être certain d'être à jour


Push une branche : 
        On ne peut pas push la branche qu’on a checkout précédemment.
        on doit en créer une nouvelle avec


        git checkout -b [nom branche]


        une fois la branche crée, on peut faire les modifications,stage et commit
        Enfin il suffit de push la branche


        git push origin [nom branche]


Comment travailler avec github ?
        L’idée est en plusieurs étapes : 


        Créer une branche
        Faire les commits
        Pull request (demande aux autres de regarder notre cde)
        Review (discuter par message des modifications)
        Deploy (tester les changements avant le merge)
        Merge (ajoute la modification au main)